{"id":"6903bc84-03e8-4556-b26d-f85a12238671","revision":0,"last_node_id":156,"last_link_id":412,"nodes":[{"id":70,"type":"CLIPVisionEncode","pos":[203.34573364257812,-339.14990234375],"size":[290,78],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"clip视觉","name":"clip_vision","type":"CLIP_VISION","link":124},{"localized_name":"图像","name":"image","type":"IMAGE","link":142},{"localized_name":"裁剪","name":"crop","type":"COMBO","widget":{"name":"crop"},"link":null}],"outputs":[{"localized_name":"CLIP视觉输出","name":"CLIP_VISION_OUTPUT","type":"CLIP_VISION_OUTPUT","slot_index":0,"links":[127]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"CLIPVisionEncode"},"widgets_values":["center"]},{"id":72,"type":"StyleModelLoader","pos":[183.34567260742188,-219.15090942382812],"size":[340,60],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"风格模型名称","name":"style_model_name","type":"COMBO","widget":{"name":"style_model_name"},"link":null}],"outputs":[{"localized_name":"风格模型","name":"STYLE_MODEL","type":"STYLE_MODEL","links":[126]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"StyleModelLoader"},"widgets_values":["flux1-redux-dev.safetensors"]},{"id":74,"type":"StyleModelApply","pos":[543.3465576171875,-339.14990234375],"size":[320,122],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"条件","name":"conditioning","type":"CONDITIONING","link":128},{"localized_name":"风格模型","name":"style_model","type":"STYLE_MODEL","link":126},{"localized_name":"clip视觉输出","name":"clip_vision_output","type":"CLIP_VISION_OUTPUT","link":127},{"localized_name":"强度","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"强度类型","name":"strength_type","type":"COMBO","widget":{"name":"strength_type"},"link":null}],"outputs":[{"localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[129]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"StyleModelApply"},"widgets_values":[1,"multiply"]},{"id":73,"type":"CLIPVisionLoader","pos":[-158.8538055419922,-445.482421875],"size":[370,60],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"clip名称","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP视觉","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[124]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"CLIPVisionLoader"},"widgets_values":["sigclip_vision_patch14_384.safetensors"]},{"id":147,"type":"CLIPTextEncode","pos":[44.36542510986328,465.902587890625],"size":[400,200],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":397},{"localized_name":"文本","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","links":[398,400]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":148,"type":"ConditioningZeroOut","pos":[534.2006225585938,546.5010986328125],"size":[140,26],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"条件","name":"conditioning","type":"CONDITIONING","link":400}],"outputs":[{"localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","links":[401]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"ConditioningZeroOut"},"widgets_values":[]},{"id":83,"type":"ReduxProcess","pos":[-610.1604614257812,-326.71441650390625],"size":[378,46],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"ref_image","name":"ref_image","type":"IMAGE","link":140},{"localized_name":"ref_mask","name":"ref_mask","type":"MASK","link":403}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[142]}],"properties":{"cnr_id":"insertanything-comfyui-official","ver":"60dc57b9054f102a532ae1b0e1d4f75cedb050b8","Node name for S&R":"ReduxProcess","aux_id":"mo230761/InsertAnything-ComfyUI-official"},"widgets_values":[]},{"id":38,"type":"InpaintModelConditioning","pos":[884.9601440429688,102.37812042236328],"size":[302.4000244140625,138],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"正面条件","name":"positive","type":"CONDITIONING","link":129},{"localized_name":"负面条件","name":"negative","type":"CONDITIONING","link":401},{"localized_name":"vae","name":"vae","type":"VAE","link":82},{"localized_name":"像素","name":"pixels","type":"IMAGE","link":391},{"localized_name":"遮罩","name":"mask","type":"MASK","link":392},{"localized_name":"噪波遮罩","name":"noise_mask","type":"BOOLEAN","widget":{"name":"noise_mask"},"link":null}],"outputs":[{"localized_name":"正面条件","name":"positive","type":"CONDITIONING","slot_index":0,"links":[77]},{"localized_name":"负面条件","name":"negative","type":"CONDITIONING","slot_index":1,"links":[78]},{"localized_name":"Latent","name":"latent","type":"LATENT","slot_index":2,"links":[88]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"InpaintModelConditioning"},"widgets_values":[true]},{"id":8,"type":"VAEDecode","pos":[1228.59716796875,347.1978454589844],"size":[210,46],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"Latent","name":"samples","type":"LATENT","link":7},{"localized_name":"vae","name":"vae","type":"VAE","link":60}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[366]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":140,"type":"CropBackNoScaling","pos":[1227.3760986328125,475.4908752441406],"size":[288.1128845214844,66],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"raw_image","name":"raw_image","type":"IMAGE","link":366},{"localized_name":"old_tar_image","name":"old_tar_image","type":"IMAGE","link":365},{"localized_name":"tar_box_yyxx_crop","name":"tar_box_yyxx_crop","type":"BOX","link":367}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[404]}],"properties":{"cnr_id":"insertanything-comfyui-official","ver":"60dc57b9054f102a532ae1b0e1d4f75cedb050b8","Node name for S&R":"CropBackNoScaling"},"widgets_values":[]},{"id":146,"type":"DualCLIPLoader","pos":[-374.86724853515625,467.6431884765625],"size":[270,130],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"CLIP名称1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"localized_name":"CLIP名称2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"localized_name":"类型","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"设备","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[397]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"DualCLIPLoader"},"widgets_values":["sd3\\clip_l.safetensors","sd3\\t5xxl_fp8_e4m3fn.safetensors","flux","default"]},{"id":31,"type":"UNETLoader","pos":[-376.8841552734375,60.17074966430664],"size":[315,82],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"UNet名称","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"数据类型","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"模型","name":"MODEL","type":"MODEL","slot_index":0,"links":[133]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"UNETLoader"},"widgets_values":["flux\\flux1-fill-dev_fp8.safetensors","fp8_e4m3fn"]},{"id":32,"type":"VAELoader","pos":[100.43464660644531,1122.609375],"size":[315,58],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"vae名称","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[60,82]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"VAELoader"},"widgets_values":["flux-ae.sft"]},{"id":150,"type":"Note","pos":[135.41366577148438,955.3892211914062],"size":[290.93646240234375,88.99921417236328],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["iterations用于扩展遮罩范围\n\"iterations\" is used to expand the mask area.  \nexpand_pixels用于扩展裁剪范围\n\"expand_pixels\" is used to expand the crop area."],"color":"#432","bgcolor":"#653"},{"id":78,"type":"LoadImage","pos":[-836.4896850585938,195.5147705078125],"size":[315,314],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[140,360]},{"localized_name":"遮罩","name":"MASK","type":"MASK","links":[402,403]}],"title":"Load_ref_image","properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"LoadImage"},"widgets_values":["clipspace/clipspace-mask-4807760.300000001.png [input]","image"]},{"id":26,"type":"FluxGuidance","pos":[470.4208984375,397.3144836425781],"size":[317.4000244140625,58],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"条件","name":"conditioning","type":"CONDITIONING","link":398},{"localized_name":"引导","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[128]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"FluxGuidance"},"widgets_values":[30]},{"id":149,"type":"PreviewImage","pos":[1239.5367431640625,594.3023071289062],"size":[278.1424865722656,256.23748779296875],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"图像","name":"images","type":"IMAGE","link":404}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":75,"type":"Note","pos":[122.28762817382812,334.1654357910156],"size":[290.93646240234375,88.99921417236328],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["由于使用redux此处可不填\nSince Redux is used, this field can be left blank."],"color":"#432","bgcolor":"#653"},{"id":153,"type":"Note","pos":[103.853515625,331.9549560546875],"size":[290.93646240234375,88.99921417236328],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["由于使用redux此处可不填\nSince Redux is used, this field can be left blank."],"color":"#432","bgcolor":"#653"},{"id":154,"type":"Note","pos":[-939.93212890625,-130.3990020751953],"size":[290.93646240234375,88.99921417236328],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["裁剪原图遮罩附近区域进行重绘，避免缩放导致图片质量下降\nThis workflow crops the original image around the masked area for redrawing, avoiding a decrease in picture quality that can result from scaling."],"color":"#432","bgcolor":"#653"},{"id":138,"type":"FillProcessNoScaling","pos":[80.09119415283203,737.4682006835938],"size":[355.0992126464844,162],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"source_image","name":"source_image","type":"IMAGE","link":410},{"localized_name":"ref_image","name":"ref_image","type":"IMAGE","link":360},{"localized_name":"source_mask","name":"source_mask","type":"MASK","link":411},{"localized_name":"ref_mask","name":"ref_mask","type":"MASK","link":402},{"localized_name":"iterations","name":"iterations","type":"INT","widget":{"name":"iterations"},"link":null},{"localized_name":"expand_pixels","name":"expand_pixels","type":"INT","widget":{"name":"expand_pixels"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[391]},{"localized_name":"mask","name":"mask","type":"MASK","links":[392]},{"localized_name":"old_tar_image","name":"old_tar_image","type":"IMAGE","links":[365]},{"localized_name":"tar_box_yyxx_crop","name":"tar_box_yyxx_crop","type":"BOX","links":[367]},{"localized_name":"preview_image","name":"preview_image","type":"IMAGE","links":[409]}],"properties":{"cnr_id":"insertanything-comfyui-official","ver":"60dc57b9054f102a532ae1b0e1d4f75cedb050b8","Node name for S&R":"FillProcessNoScaling"},"widgets_values":[0,64]},{"id":3,"type":"KSampler","pos":[866.9269409179688,331.59173583984375],"size":[315,474],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"模型","name":"model","type":"MODEL","link":412},{"localized_name":"正面条件","name":"positive","type":"CONDITIONING","link":77},{"localized_name":"负面条件","name":"negative","type":"CONDITIONING","link":78},{"localized_name":"Latent图像","name":"latent_image","type":"LATENT","link":88},{"localized_name":"种子","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"步数","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"采样器名称","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"调度器","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"降噪","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"Latent","name":"LATENT","type":"LATENT","slot_index":0,"links":[7]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"KSampler"},"widgets_values":[42,"fixed",28,1,"euler","normal",1]},{"id":156,"type":"LoadImage","pos":[-811.22900390625,726.3577880859375],"size":[315,314.00006103515625],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[410]},{"localized_name":"遮罩","name":"MASK","type":"MASK","links":[411]}],"title":"Load_src_image","properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"LoadImage"},"widgets_values":["clipspace/clipspace-mask-134377.59999999776.png [input]","image"]},{"id":155,"type":"PreviewImage","pos":[541.0213623046875,857.2556762695312],"size":[340.0912780761719,337.933837890625],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"图像","name":"images","type":"IMAGE","link":409}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":76,"type":"LoraLoaderModelOnly","pos":[-20.996715545654297,53.16912841796875],"size":[315,82],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"模型","name":"model","type":"MODEL","link":133},{"localized_name":"LoRA名称","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"模型强度","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"模型","name":"MODEL","type":"MODEL","links":[412]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"LoraLoaderModelOnly"},"widgets_values":["flux\\insert-anything-lora.safetensors",1]}],"links":[[7,3,0,8,0,"LATENT"],[60,32,0,8,1,"VAE"],[77,38,0,3,1,"CONDITIONING"],[78,38,1,3,2,"CONDITIONING"],[82,32,0,38,2,"VAE"],[88,38,2,3,3,"LATENT"],[124,73,0,70,0,"CLIP_VISION"],[126,72,0,74,1,"STYLE_MODEL"],[127,70,0,74,2,"CLIP_VISION_OUTPUT"],[128,26,0,74,0,"CONDITIONING"],[129,74,0,38,0,"CONDITIONING"],[133,31,0,76,0,"MODEL"],[140,78,0,83,0,"IMAGE"],[142,83,0,70,1,"IMAGE"],[360,78,0,138,1,"IMAGE"],[365,138,2,140,1,"IMAGE"],[366,8,0,140,0,"IMAGE"],[367,138,3,140,2,"BOX"],[391,138,0,38,3,"IMAGE"],[392,138,1,38,4,"MASK"],[397,146,0,147,0,"CLIP"],[398,147,0,26,0,"CONDITIONING"],[400,147,0,148,0,"CONDITIONING"],[401,148,0,38,1,"CONDITIONING"],[402,78,1,138,3,"MASK"],[403,78,1,83,1,"MASK"],[404,140,0,149,0,"IMAGE"],[409,138,4,155,0,"IMAGE"],[410,156,0,138,0,"IMAGE"],[411,156,1,138,2,"MASK"],[412,76,0,3,0,"MODEL"]],"groups":[{"id":2,"title":"Redux Model","bounding":[-166.65396118164062,-522.749267578125,1040,507.6000061035156],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"Reference","bounding":[-885.4607543945312,61.16197204589844,407.48931884765625,481.5951843261719],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"Source","bounding":[-871.143798828125,616.7518920898438,417.5911560058594,466.6368713378906],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.8390545288824335,"offset":[1063.9374113773715,8.038649924378284]},"frontendVersion":"1.17.11"},"version":0.4}